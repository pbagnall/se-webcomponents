<!doctype html>
<html lang="en/GB">
  <head>
    <title>Date Picker demo</title>
    <script src="/lib/dayjs.js"></script>
    <script type='module' src='/components/datepicker.js'></script>
    <style>
      body {
        font-family: Avenir, sans-serif;
        margin: 8px;
      }

      se-popup {
        --backgroundColor: #ffffaa;
        --padding: 0.25rem;
      }

      se-datepicker.alternate {
        --oddMonthBackground: #eaeaff;
        --evenMonthBackground: #ffffff;
        --toolbarBackground: #8888ff;
        --foreground: #000000;
        --hoverColor: #ffffff;
        --hoverBackgroundColor: #0000ff80;
        --selectedColor: #ffffff;
        --selectedBackgroundColor: #0000ff;
        --todayBorderColor: #80ccff;
      }

      button#trigger {
        position: absolute; bottom: 8px; left: 8px;
        background-color: grey;
        color: white;
        border: 2px solid black;
        border-radius: 3px;
      }

      .topright { position: absolute; top: 8px; right: 8px; }
      .bottomright { position: fixed; bottom: 8px; right: 8px; }
    </style>
    <script type='text/javascript'>
      function dateChanged(event) {
        const output = document.getElementById('output');
        const date = dayjs(event.value);
        output.replaceChildren(document.createTextNode(date.format("DD-MMM-YYYY")));
      }

      function popupTriggered() {
        const trigger = document.getElementById("trigger");
        if (trigger.textContent === 'Open popup') {
          document.getElementById("popup").open();
          trigger.textContent = 'Close popup'
        } else {
          document.getElementById("popup").close();
        }
      }

      function popupClosed() {
        const trigger = document.getElementById("trigger");
        trigger.textContent = 'Open popup';
      }
    </script>
  </head>
  <body>
    <section>
       <se-datepicker date='2023-5-12' onchange='dateChanged(event)'></se-datepicker>
       Selected date = <output id='output'>2023-05-12</output>

       <se-datepicker class='topright alternate' date='2023-5-12'></se-datepicker>
       <se-datepicker class='bottomright' date='2023-1-12'></se-datepicker>

       <button id='trigger' onclick='popupTriggered(event)'>Open popup</button>
       <se-popup id='popup' anchor='trigger' anchor-direction='se,em,en' onclose='popupClosed(event)'>
         This is a popup. It has a bunch of content in it.
       </se-popup>
    </section>
    <section>
       <h2>To Do</h2>
       <ul>
         <li>Refactor adding weeks</li>
         <li>Implement keyboard interaction</li>
         <li>Implement month/year up/down buttons</li>
         <li>Implement date parsing for typed input</li>
         <li>Implement canned dates options</li>
       </ul>

       <h2>Future ideas</h2>
       <ul>
         <li>Add API for adding "busy" indicators to calendar</li>
         <li>Quick dates</li>
         <li>
           If today and selected date are close together, then when the picker opens
           it should scroll so both are visible
         </li>
         <li></li>
         <li></li>
       </ul>
    </section>
  </body>
</html>
