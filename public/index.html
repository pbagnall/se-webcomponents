<!doctype html>
<html lang="en/GB">
  <head>
    <script src="/lib/dayjs.js"></script>
    <script type='module' src='/components/datepicker.js'></script>
    <style><!--
      body {
        font-family: Avenir, sans-serif;
        margin: 8px;
      }

      #popupcontent {
        background-color: white;
        padding: 0.25rem;

      }
    --></style>
    <script type='text/javascript'>
      function dateChanged(event) {
        const output = document.getElementById('output');
        const date = dayjs(event.value);
        output.replaceChildren(document.createTextNode(date.format("DD-MMM-YYYY")));
      }

      function popupTriggered(event) {
        document.getElementById("popup").toggle();
        const trigger = document.getElementById("trigger");
        trigger.textContent = trigger.textContent === 'Open popup' ? 'Close popup' : 'Open popup';
      }
    </script>
  </head>
  <body>
    <se-datepicker date='2023-5-12' onchange='dateChanged(event)'></se-datepicker>
    Selected date = <output id='output'>2023-05-12</output>

    <div style='position: absolute; top: 8px; right: 8px; background-color: lightgreen; padding: 20px;'>
      <se-datepicker date='2023-1-12'></se-datepicker>
    </div>

    <div style='position: fixed; bottom: 8px; right: 8px; background-color: lightgreen; padding: 20px;'>
      <se-datepicker date='2023-1-12'></se-datepicker>
    </div>

    <div style='position: fixed; bottom: 8px; left: 8px; background-color: lightgreen; padding: 20px;'>
      <button id='trigger' onclick='popupTriggered(event)'>Open popup</button>
    </div>
    <se-popup id='popup' anchor='trigger' anchor-direction='ne,en'>
      <div id='popupcontent'>This is a popup. It has a bunch of content in it. Should be wide.</div>
    </se-popup>

    <h2>To Do</h2>
    <ul>
      <li>Clicking outside popup should close it</li>
      <li>Fix bug where months and years don't extend and reveal the (red) background</li>
      <li>Refactor adding weeks</li>
      <li>Implement keyboard interaction</li>
      <li>Implement month/year up/down buttons</li>
      <li>Implement date parsing for typed input</li>
      <li>Implement canned dates options</li>
    </ul>

    <h2>Future ideas</h2>
    <ul>
      <li>Add API for adding "busy" indicators to calendar</li>
      <li>Quick dates</li>
      <li>
        If today and selected date are close together, then when the picker opens
        it should scroll so both are visible
      </li>
      <li></li>
      <li></li>
    </ul>
  </body>
</html>
